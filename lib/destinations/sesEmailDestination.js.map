{"version":3,"sources":["destinations/sesEmailDestination.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;;;IAMqB;;;;;;;;AAKnB,WALmB,mBAKnB,CAAY,cAAZ,EAA4B;wCALT,qBAKS;;6FALT,iCAKS;;AAG1B,QAAI,CAAC,cAAD,EAAiB;AACnB,YAAM,IAAI,KAAJ,CAAU,0BAAV,CAAN,CADmB;KAArB;;AAIA,UAAK,GAAL,GAAW,IAAI,iBAAI,GAAJ,CAAQ,cAAZ,CAAX,CAP0B;AAQ1B,UAAK,GAAL,CAAS,cAAT,GAA0B,yBAAU,MAAK,GAAL,CAAS,SAAT,CAApC,CAR0B;;GAA5B;;6BALmB;;;4FAgBR;;;;;;;uBAEM,KAAK,GAAL,CAAS,cAAT,CAAwB;AACnC,+BAAa,EAAE,aAAa,CAAC,KAAK,UAAL,CAAd,EAAf;AACA,0BAAQ,KAAK,YAAL;AACR,2BAAS;AACP,0BAAM;AACJ,4BAAM,EAAC,MAAM,GAAN,EAAP;qBADF;AAGA,6BAAS;AACP,4BAAM,KAAK,eAAL;qBADR;mBAJF;iBAHW;;;;;;;;;AAab,wBAAQ,GAAR,CAAY,SAAZ;;;;;;;;;;;;;;;;;;iCAIS,MAAM;AACjB,WAAK,UAAL,GAAkB,IAAlB,CADiB;;;;mCAIJ,MAAM;AACnB,WAAK,YAAL,GAAoB,IAApB,CADmB;;;;sCAIH,MAAM;AACtB,WAAK,eAAL,GAAuB,IAAvB,CADsB;;;SA3CL","file":"destinations/sesEmailDestination.js","sourcesContent":["import EmailDestination from './emailDestination';\nimport AWS from 'aws-sdk';\nimport promisify from '../promisify';\n\n/**\n * SESDestination @class\n * @extends {EmailDestination}\n */\nexport default class SESEmailDestination extends EmailDestination {\n\n  /**\n   * @param {Object} awsCredentials AWS credentials config object\n   */\n  constructor(awsCredentials) {\n    super();\n\n    if (!awsCredentials) {\n      throw new Error('AWS credentials required');\n    }\n    \n    this.ses = new AWS.SES(awsCredentials);\n    this.ses.sendEmailAsync = promisify(this.ses.SendEmail);\n  }\n\n  async send(src) {\n    try {\n      return await this.ses.sendEmailAsync({\n        Destination: { ToAddresses: [this._toAddress] },\n        Source: this._fromAddress,\n        Message: {\n          Body: {\n            Text: {Data: src}\n          },\n          Subject: {\n            Data: this._messageSubject\n          }\n        }\n      });\n    } catch (err) {\n      console.log('error: ', err);\n    }\n  }\n\n  setToAddress(addr) {\n    this._toAddress = addr;\n  }\n\n  setFromAddress(addr) {\n    this._fromAddress = addr;\n  }\n\n  setMessageSubject(subj) {\n    this._messageSubject = subj;\n  }\n}\n"],"sourceRoot":"/source/"}