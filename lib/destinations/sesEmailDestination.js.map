{"version":3,"sources":["destinations/sesEmailDestination.js"],"names":[],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;;;;AAMe,MAAM,mBAAN,oCAAmD;;;;;AAKhE,cAAY,cAAZ,EAA4B;AAC1B,YAD0B;;AAG1B,QAAI,CAAC,cAAD,EAAiB;AACnB,YAAM,IAAI,KAAJ,CAAU,0BAAV,CAAN,CADmB;KAArB;;AAIA,SAAK,GAAL,GAAW,IAAI,iBAAI,GAAJ,CAAQ,cAAZ,CAAX,CAP0B;AAQ1B,SAAK,GAAL,CAAS,cAAT,GAA0B,yBAAU,KAAK,GAAL,CAAS,SAAT,CAApC,CAR0B;GAA5B;;AAWA,OAAW,GAAX,EAAgB;;;;AACd,UAAI;AACF,eAAO,MAAM,MAAK,GAAL,CAAS,cAAT,CAAwB;AACnC,uBAAa,EAAE,aAAa,CAAC,MAAK,UAAL,CAAd,EAAf;AACA,kBAAQ,MAAK,YAAL;AACR,mBAAS;AACP,kBAAM;AACJ,oBAAM,EAAC,MAAM,GAAN,EAAP;aADF;AAGA,qBAAS;AACP,oBAAM,MAAK,eAAL;aADR;WAJF;SAHW,CAAN,CADL;OAAJ,CAaE,OAAO,GAAP,EAAY;AACZ,gBAAQ,GAAR,CAAY,SAAZ,EAAuB,GAAvB,EADY;OAAZ;SAdY;GAAhB;;AAmBA,eAAa,IAAb,EAAmB;AACjB,SAAK,UAAL,GAAkB,IAAlB,CADiB;GAAnB;;AAIA,iBAAe,IAAf,EAAqB;AACnB,SAAK,YAAL,GAAoB,IAApB,CADmB;GAArB;;AAIA,oBAAkB,IAAlB,EAAwB;AACtB,SAAK,eAAL,GAAuB,IAAvB,CADsB;GAAxB;CA3Ca;kBAAM","file":"destinations/sesEmailDestination.js","sourcesContent":["import EmailDestination from './emailDestination';\nimport AWS from 'aws-sdk';\nimport promisify from '../promisify';\n\n/**\n * SESDestination @class\n * @extends {EmailDestination}\n */\nexport default class SESEmailDestination extends EmailDestination {\n\n  /**\n   * @param {Object} awsCredentials AWS credentials config object\n   */\n  constructor(awsCredentials) {\n    super();\n\n    if (!awsCredentials) {\n      throw new Error('AWS credentials required');\n    }\n    \n    this.ses = new AWS.SES(awsCredentials);\n    this.ses.sendEmailAsync = promisify(this.ses.SendEmail);\n  }\n\n  async send(src) {\n    try {\n      return await this.ses.sendEmailAsync({\n        Destination: { ToAddresses: [this._toAddress] },\n        Source: this._fromAddress,\n        Message: {\n          Body: {\n            Text: {Data: src}\n          },\n          Subject: {\n            Data: this._messageSubject\n          }\n        }\n      });\n    } catch (err) {\n      console.log('error: ', err);\n    }\n  }\n\n  setToAddress(addr) {\n    this._toAddress = addr;\n  }\n\n  setFromAddress(addr) {\n    this._fromAddress = addr;\n  }\n\n  setMessageSubject(subj) {\n    this._messageSubject = subj;\n  }\n}\n"],"sourceRoot":"/source/"}