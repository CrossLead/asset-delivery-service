{"version":3,"sources":["sources/s3Source.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;IAEqB,Q;;;;;;;;;AAMnB,oBAAY,UAAZ,EAAwB,cAAxB,EAAwC;AAAA;;AAAA;;AAGtC,QAAI,CAAC,UAAL,EAAiB;AACf,YAAM,IAAI,KAAJ,CAAU,yBAAV,CAAN;AACD;;AAED,QAAI,CAAC,cAAL,EAAqB;AACnB,YAAM,IAAI,KAAJ,CAAU,0BAAV,CAAN;AACD;;AAED,UAAK,OAAL,GAAe,UAAf;;AAEA,UAAK,GAAL,GAAW,IAAI,iBAAI,EAAR,CAAW,iBAAE,MAAF,CAAS,EAAE,QAAQ,EAAE,QAAQ,MAAK,OAAf,EAAV,EAAT,EAA8C,cAA9C,CAAX,CAAX;AACA,UAAK,GAAL,CAAS,gBAAT,GAA4B,4BAAU,MAAK,GAAL,CAAS,WAAnB,CAA5B;AAdsC;AAevC;;;;;;;;;;;;;;YAOO,O;;;;;;uBAAgB,KAAK,GAAL,CAAS,gBAAT,E;;;AAAhB,uB;iDACC,QAAQ,QAAR,CAAiB,GAAjB,CAAqB,iBAAS;AACnC,8BAAU,OAAK,GAAL,CAAS,QAAT,CAAkB,IAA5B,GAAmC,OAAK,OAAxC,SAAmD,MAAM,GAAzD;AACD,iBAFM,C;;;;;;;;;;;;;;;;;;;;kBA7BU,Q","file":"sources/s3Source.js","sourcesContent":["import _ from 'lodash';\nimport Source from './source';\nimport promisify from 'es6-promisify';\nimport AWS from 'aws-sdk';\n\nexport default class S3Source extends Source {\n\n  /**\n   * @param {String} bucketName\n   * @param {Object} awsCredentials\n   */\n  constructor(bucketName, awsCredentials) {\n    super();\n\n    if (!bucketName) {\n      throw new Error('S3 bucket name required');\n    }\n\n    if (!awsCredentials) {\n      throw new Error('AWS credentials required');\n    }\n\n    this._bucket = bucketName;\n\n    this._s3 = new AWS.S3(_.assign({ params: { Bucket: this._bucket }}, awsCredentials));\n    this._s3.listObjectsAsync = promisify(this._s3.listObjects);\n  }\n\n  /**\n   * Get the deliverable assets from the S3 bucket\n   * @return {String[]}\n   */\n  async getAssets() {\n    const objList = await this._s3.listObjectsAsync();\n    return objList.Contents.map(s3Obj => {\n      return `${this._s3.endpoint.href}${this._bucket}/${s3Obj.Key}`;\n    });\n  }\n}\n"],"sourceRoot":"/source/"}