{"version":3,"sources":["sources/s3Source.js"],"names":[],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEe,MAAM,QAAN,0BAA8B;;;;;;AAM3C,cAAY,UAAZ,EAAwB,cAAxB,EAAwC;AACtC,YADsC;;AAGtC,QAAI,CAAC,UAAD,EAAa;AACf,YAAM,IAAI,KAAJ,CAAU,yBAAV,CAAN,CADe;KAAjB;;AAIA,QAAI,CAAC,cAAD,EAAiB;AACnB,YAAM,IAAI,KAAJ,CAAU,0BAAV,CAAN,CADmB;KAArB;;AAIA,SAAK,OAAL,GAAe,UAAf,CAXsC;;AAatC,SAAK,GAAL,GAAW,IAAI,iBAAI,EAAJ,CAAO,iBAAE,MAAF,CAAS,EAAE,QAAQ,EAAE,QAAQ,KAAK,OAAL,EAAlB,EAAX,EAA8C,cAA9C,CAAX,CAAX,CAbsC;AActC,SAAK,GAAL,CAAS,gBAAT,GAA4B,yBAAU,KAAK,GAAL,CAAS,WAAT,CAAtC,CAdsC;GAAxC;;;;;;AAN2C,WA2B3C,GAAkB;;;;AAChB,YAAM,UAAU,MAAM,MAAK,GAAL,CAAS,gBAAT,EAAN;AAChB,aAAO,QAAQ,QAAR,CAAiB,GAAjB,CAAqB,iBAAS;AACnC,eAAO,CAAC,GAAE,MAAK,GAAL,CAAS,QAAT,CAAkB,IAAlB,EAAuB,GAAE,MAAK,OAAL,EAAa,CAAzC,GAA4C,MAAM,GAAN,EAAU,CAA7D,CADmC;OAAT,CAA5B;SAFgB;GAAlB;CA3Ba;kBAAM","file":"sources/s3Source.js","sourcesContent":["import _ from 'lodash';\nimport Source from './source';\nimport promisify from '../promisify';\nimport AWS from 'aws-sdk';\n\nexport default class S3Source extends Source {\n\n  /**\n   * @param {String} bucketName\n   * @param {Object} awsCredentials\n   */\n  constructor(bucketName, awsCredentials) {\n    super();\n\n    if (!bucketName) {\n      throw new Error('S3 bucket name required');\n    }\n\n    if (!awsCredentials) {\n      throw new Error('AWS credentials required');\n    }\n\n    this._bucket = bucketName;\n\n    this._s3 = new AWS.S3(_.assign({ params: { Bucket: this._bucket }}, awsCredentials));\n    this._s3.listObjectsAsync = promisify(this._s3.listObjects);\n  }\n\n  /**\n   * Get the deliverable assets from the S3 bucket\n   * @return {String[]}\n   */\n  async getAssets() {\n    const objList = await this._s3.listObjectsAsync();\n    return objList.Contents.map(s3Obj => {\n      return `${this._s3.endpoint.href}${this._bucket}/${s3Obj.Key}`;\n    });\n  }\n}\n"],"sourceRoot":"/source/"}